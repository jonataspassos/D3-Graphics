<html>
    <head>
        <!--<script src="d3/d3.js"></script>-->
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script src="j-graphics.js"></script>
        <style>
            #vis{
                width:80%;
                height: 80%;
            }
        </style>
    </head>
    <body>
        <div id="vis"></div>

        <script>
            //*
            chart = jg.chart_stack_group_bar().on("click", (d, i, e, t) => { console.log([d, i, e, t]) })
                .tooltip((d,i)=>{return `<strong>${d.key}</strong></br>Nota: ${d.d}`})
                //.color(["#4f9887","#922717","steelblue","black","green"]);

            //*
            function repeat() {
                setTimeout(() => d3.select("#vis").transition().duration(2000).ease(d3.easeBounce).call(chart.data(jg.getRandom(0,2))).on("end", repeat), 1000) 
            }
            repeat();/**/

            //d3.select("#vis").transition().duration(2000).call(chart);

            //setInterval(() => d3.select("#vis").call(chart.data(true).stack_mode(-1)), 3000)
            //d3.select("#vis").call(chart.data(true).stack_mode(-1));


            /*
            var data = [
                {key:"Professores", list:[63,21]},
                {key:"Estudantes", list:[536,358]},
            ]

            var color_vec = ["#9ed5cf","#5eb6aa","#4f9887","#d3989c","#b14954","#922717"];

            chart = jg.chart_tree_percent().data(data)
                .on("click", (d, i, e, t) => { console.log([d, i, e, t]) })
                .tooltip((d,i)=>{return `<strong>${d.key}</strong></br>Nota: ${d.d}`})
                .color(function(d,i){
                    return color_vec[d.i*3+i];
                },true);

            window.addEventListener('resize', function(){
                d3.select("#vis").transition().duration(2000)
                .call(chart);
            });/**/
        </script>
    </body>
</html>